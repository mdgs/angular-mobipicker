/*! Angular Directive for mobiscroll picker - v0.0.0 - 2016-01-27
* Copyright (c) 2016 I Made Agus Setiawan; Licensed , , , , , , , , , ,  */
angular.module("hari.ui",[]).directive("mobiPicker",["$parse","$timeout",function(a,b){var c=new RegExp(/^(1[012]|[1-9]):[0-5][0-9](\s)?(am|pm)$/i),d=new RegExp(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/i),e={restrict:"A",link:function(c,d,e){var f={preset:"date",theme:"default",mode:"scroller",display:"modal",animate:"none",customTime:!1,onSelect:function(){},onClose:function(f,g,h){var i=a(e.mobiPicker),j=i.assign;b(function(){switch(g){case"set":c.$apply(function(){if(h.settings.customTime&&["time"].indexOf(h.settings.preset)>=0){var a=d.mobiscroll("getValue"),b=("0"+a[0]).substr(-2)+":";b+=("0"+a[1]).substr(-2),a.length>2&&(b+=""+a[2]=="0"?" AM":" PM"),j(c,b)}else["date","time","datetime"].indexOf(h.settings.preset)>=0?j(c,angular.copy(d.mobiscroll("getDate"))):["select"].indexOf(h.settings.preset)>=0&&j(c,angular.copy(d.mobiscroll("getValue")))});break;case"clear":c.$apply(function(){j(c,null)})}},0,!1)}},g=e.mobiPickerOptions||"{}",h=c.$eval(g);h.defaultValue=a(e.defaultValue)(c),angular.extend(f,h),b(function(){d.scroller(f)},300)},controller:["$scope","$element","$attrs",function(e,f,g){e.$watch(function(){var b=a(g.mobiPicker);return b(e)},function(a){b(function(){var b=f.mobiscroll("getInst");a instanceof Date&&["date","time","datetime"].indexOf(b.settings.preset)>=0?f.mobiscroll("setDate",a,!0):b.settings&&b.settings.customTime&&["time"].indexOf(b.settings.preset)>=0&&(c.test(a)||d.test(a))?f.mobiscroll("setValue",a,!0):b.settings&&b.settings.preset&&["select"].indexOf(b.settings.preset)>=0&&f.mobiscroll("setValue",[a],!0)},0,!1)},!0)}]};return e}]);